<!DOCTYPE html>
<html lang="zxx" class="no-js">

<!-- Mirrored from colorlib.com/preview/theme/eclipse/course-details.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 17 Feb 2019 15:42:40 GMT -->
<!-- Added by HTTrack -->
<meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->

<head>

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <link rel="shortcut icon" href="img/fav.png" />

    <meta name="author" content="colorlib" />

    <meta name="description" content="" />

    <meta name="keywords" content="" />

    <meta charset="UTF-8" />

    <title>EditProfile</title>
    <link href="https://fonts.googleapis.com/css?family=Playfair+Display:900|Roboto:400,400i,500,700"
        rel="stylesheet" />

    <link rel="stylesheet" href="css/linearicons.css" />
    <link rel="stylesheet" href="css/font-awesome.min.css" />
    <link rel="stylesheet" href="css/bootstrap.css" />
    <link rel="stylesheet" href="css/magnific-popup.css" />
    <link rel="stylesheet" href="css/owl.carousel.css" />
    <link rel="stylesheet" href="css/nice-select.css">
    <link rel="stylesheet" href="css/hexagons.min.css" />
    <link rel="stylesheet" href="../../../../cdn.jsdelivr.net/themify-icons/0.1.2/css/themify-icons.css" />
    <link rel="stylesheet" href="css/main.css" />
</head>

<body>

    <header class="default-header">
        <nav class="navbar navbar-expand-lg  navbar-light">
            <div class="container">
                <h3 style="color:white">ABC Institute</h3>
                <button class="navbar-toggler" type="button" data-toggle="collapse"
                    data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="lnr lnr-menu"></span>
                </button>
                <div class="collapse navbar-collapse justify-content-end align-items-center"
                    id="navbarSupportedContent">
                    <ul class="navbar-nav">
                        <li><a href="index-2.html">Home</a></li>
                        <li><a href="about.html">About</a></li>
                        <li><a href="courses.html">Courses</a></li>

                        <li class="dropdown">
                            <a class="dropdown-toggle" href="#" data-toggle="dropdown">
                                Pages
                            </a>
                            <div class="dropdown-menu">
                                <a class="dropdown-item" href="elements.html">Elements</a>
                                <a class="dropdown-item" href="course-details.html">EditProfile</a>
                            </div>
                        </li>
                        <li><a href="contacts.html">Contacts</a></li>
                        <li>
                            <button class="search">
                                <span class="lnr lnr-magnifier" id="search"></span>
                            </button>
                        </li>
                        <li class="dropdown" style="margin-left: 100px">
                            <div class="dropdown-toggle" id="user_session" data-toggle="dropdown" style="color: white; margin-left: 20px;" > User</div>
                            <div class="dropdown-menu">
                                <a class="dropdown-item" id="login" href="Login_page.html">Login</a>
                                <a class="dropdown-item" id="logout">Logout</a>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <div class="search-input" id="search-input-box">
            <div class="container">
                <form class="d-flex justify-content-between">
                    <input type="text" class="form-control" id="search-input" placeholder="Search Here" />
                    <button type="submit" class="btn"></button>
                    <span class="lnr lnr-cross" id="close-search" title="Close Search"></span>
                </form>
            </div>
        </div>
    </header>


    <section class="banner-area">
        <div class="container">
            <div class="row justify-content-center align-items-center">
                <div class="col-lg-12 banner-right">
                    <h1 class="text-white">
                        EditProfile
                    </h1>
                </div>
            </div>
        </div>
    </section>



    <section class="course-details-area ">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12 right-contents">
                        <form role="form">
                            <div class="box-body">
                                <div class="form-group">
                                    <label>Student ID </label>
                                    <input type="text" class="form-control" id="sid">
                                </div>
                                <div class="form-group">
                                    <label>First Name</label>
                                    <input type="text" class="form-control" id="fname">
                                </div>
                                <div class="form-group">
                                    <label>Last Name </label>
                                    <input type="text" class="form-control" id="lname">
                                </div>

                                <div class="form-group" >
                                    <select name="Position" class="form-control" style="border-color: black;" id="Position">
                                        <option value="Student" >Student</option>
                                        <option value="Lecture" >Lecture</option>
                                    </select>
                                </div>

<br><br>
                                <div class="form-group">
                                    <label>Birthday </label>
                                    <input type="date" class="form-control" id="bday">
                                </div>
                                <div class="form-group">
                                    <label>Address</label>
                                    <div id="address" style="border: 1px solid #ced4da; border-radius: 5px;"
                                        class="round2" contenteditable="true"></div>
                                </div>
                                <div class="form-group">
                                    <label>Phone Number</label>
                                    <input type="text" class="form-control" id="phone">
                                </div>
                                <div class="form-group">
                                    <label>Email</label>
                                    <input type="text" class="form-control" id="email">
                                </div>
                                <div class="form-group">
                                    <label>Password</label>
                                    <input type="text" class="form-control" id="password">
                                </div>

                                <div class="box-footer" style="text-align: left">
                                    <button type="reset" class="btn btn-primary" style="width: 45%;">Reset</button>
                                    <button type="button" id="btnSave" class="btn btn-primary" style="width: 45%;">ADD</button>
                                </div>
                                <label id="option"></label>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>

    </br>
    <footer class="footer-area section-gap">
        <div class="container">
            <div class="row">
                <div class="col-lg-2 col-md-6 single-footer-widget box">
                    <h4>Colombo </h4>
                    <ul>
                        <li>Line : 011 23334567</li>
                        <li>Mobile : 0777777777</li>
                        <li>Address :Colombo 5</li>
                        <li>137 Kirulapone Ave</li>
                    </ul>
                </div>
                <div class="col-lg-2 col-md-6 single-footer-widget box">
                    <h4>Galle </h4>
                    <ul>
                        <li>Line : 011 23334567</li>
                        <li>Mobile : 0777777777</li>
                        <li>Address :Colombo 5</li>
                        <li>137 Kirulapone Ave</li>
                    </ul>
                </div>
                <div class="col-lg-2 col-md-6 single-footer-widget box">
                    <h4>Kandy </h4>
                    <ul>
                        <li>Line : 011 23334567</li>
                        <li>Mobile : 0777777777</li>
                        <li>Address :Colombo 5</li>
                        <li>137 Kirulapone Ave</li>
                    </ul>
                </div>
                <div class="col-lg-2 col-md-6 single-footer-widget box">
                    <h4>Trincomalee </h4>
                    <ul>
                        <li>Line : 011 23334567</li>
                        <li>Mobile : 0777777777</li>
                        <li>Address :Colombo 5</li>
                        <li>137 Kirulapone Ave</li>
                    </ul>
                </div>
                <div class="col-lg-4 col-md-6 single-footer-widget box">
                    <ul>
                        <li style="text-align: center"><img src="education.gif" alt="Smiley face" height="100"
                                width="100"></li>
                        <li style="text-align: center">
                            <h3 style="color:white">ABC Institute</h3>
                        </li>
                        <li>
                            <h4>Email : abc.institute@gmail.com</h4>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom row align-items-center">
                <p class="footer-text m-0 col-lg-8 col-md-12">

                    Copyright &copy;
                    <script>document.write(new Date().getFullYear());</script> All rights reserved | This is a ITPM
                    Project. Creat
                    <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://colorlib.com/"
                        target="_blank">by
                        WE_19_15 Group</a>
                </p>
                <div class="col-lg-4 col-md-12 footer-social">
                    <a href="#"><i class="fa fa-facebook"></i></a>
                    <a href="#"><i class="fa fa-twitter"></i></a>
                    <a href="#"><i class="fa fa-dribbble"></i></a>
                    <a href="#"><i class="fa fa-behance"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <script src="js/vendor/jquery-2.2.4.min.js"></script>
    <script src="../../../../cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"
        integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
        crossorigin="anonymous"></script>
    <script src="js/vendor/bootstrap.min.js"></script>
    <script type="text/javascript"
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBhOdIF3Y9382fqJYt5I_sswSrEw5eihAA"></script>
    <script src="js/jquery.ajaxchimp.min.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/parallax.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.sticky.js"></script>
    <script src="js/hexagons.min.js"></script>
    <script src="js/jquery.counterup.min.js"></script>
    <script src="js/waypoints.min.js"></script>
    <script src="js/jquery.nice-select.min.js"></script>
    <script src="js/main.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-23581568-13"></script>
    <script>
        // API image uploder
        var SERVER_URL = "http://localhost:3020";
        // API image uploder
        <!--footer-->
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-23581568-13');
        <!--footer-->

        <!--front end connector the back end using ajax-->
        var studentID = $("#user_session").text();
        var  possition = $("#option").text();
        $("#btnSave").click(function() {

            if($('Save' == "#btnSave").text()) {

                if ('Student' == $("option:selected").val()) {


                    var student = {
                        sid: $("#sid").val(),
                        fname: $("#fname").val(),
                        lname: $("#lname").val(),
                        bday: $("#bday").val(),
                        address: $("#address").text(),
                        phone: $("#phone").val(),
                        email: $("#email").val(),
                        password: $("#password").val()
                    };

                    var ajaxConfig = {
                        method: "POST",
                        url: SERVER_URL + "/api/v1/students",
                        async: true,
                        contentType: "application/json",
                        data: JSON.stringify(student)
                    }

                    $.ajax(ajaxConfig).done(function (response, statusText, jxhr) {
                        alert("Added Successfully");
                        $('button[type="reset"]').trigger("click");
                    }).fail(function (jxhr, statusText, error) {
                        alert("Unable to save the course, try again");
                        console.log(error);
                    });

                } else {
                    var lec = {
                        sid: $("#sid").val(),
                        fname: $("#fname").val(),
                        lname: $("#lname").val(),
                        position: $("option:selected").val(),
                        bday: $("#bday").val(),
                        address: $("#address").text(),
                        phone: $("#phone").val(),
                        email: $("#email").val(),
                        password: $("#password").val()
                    };

                    var ajaxConfig = {
                        method: "POST",
                        url: SERVER_URL + "/api/v1/lectures",
                        async: true,
                        contentType: "application/json",
                        data: JSON.stringify(lec)
                    }

                    $.ajax(ajaxConfig).done(function (response, statusText, jxhr) {
                        alert("Added Successfully");
                        $('button[type="reset"]').trigger("click");
                    }).fail(function (jxhr, statusText, error) {
                        alert("Unable to save the course, try again");
                        console.log(error);
                    });
                }
            }
            else {
                if ('Student' == $("option:selected").val()) {


                    var student = {
                        sid: $("#sid").val(),
                        fname: $("#fname").val(),
                        lname: $("#lname").val(),
                        bday: $("#bday").val(),
                        address: $("#address").text(),
                        phone: $("#phone").val(),
                        email: $("#email").val(),
                        password: $("#password").val()
                    };

                    var ajaxConfig = {
                        method: "PUT",
                        url: SERVER_URL + "/api/v1/students/"+ $("#sid").val(),
                        async: true,
                        contentType: "application/json",
                        data: JSON.stringify(student)
                    }

                    $.ajax(ajaxConfig).done(function (response, statusText, jxhr) {
                        alert("Added Successfully");
                        $('button[type="reset"]').trigger("click");
                    }).fail(function (jxhr, statusText, error) {
                        alert("Unable to update the course, try again");
                        console.log(error);
                    });

                } else {
                    var lec = {
                        sid: $("#sid").val(),
                        fname: $("#fname").val(),
                        lname: $("#lname").val(),
                        position: $("option:selected").val(),
                        bday: $("#bday").val(),
                        address: $("#address").text(),
                        phone: $("#phone").val(),
                        email: $("#email").val(),
                        password: $("#password").val()
                    };

                    var ajaxConfig = {
                        method: "PUT",
                        url: SERVER_URL + "/api/v1/lectures" + $("#sid").val(),
                        async: true,
                        contentType: "application/json",
                        data: JSON.stringify(lec)
                    }

                    $.ajax(ajaxConfig).done(function (response, statusText, jxhr) {
                        alert("Added Successfully");
                        $('button[type="reset"]').trigger("click");
                    }).fail(function (jxhr, statusText, error) {
                        alert("Unable to save the course, try again");
                        console.log(error);
                    });
                }
            }
        });

        $('button[type="reset"]').click(function(){
            // $("#myTable tbody tr").removeClass("selected-row");
            // $("#id").attr("disabled",false);
            uplodURL="image.png";
            $("#img-preview").attr("src",uplodURL);
            $("#address").text("  ");
        });


        $(document).ready(function () {

            var ajaxConfig = {
                method: "GET",
                url:SERVER_URL + "/api/v1/login",
                async: true
            };

            $.ajax(ajaxConfig).done(function(result,statusText,jxhr){
                console.log(result);
                studentID = result[1];
                possition = result[2];
                console.log(possition);
                $("#option").hide();
                $("#option").text(possition);
                $("#user_session").text(studentID);
                if(studentID != null){
                    $("#logout").show();
                    $("#login").hide();
                }else{
                    $("#login").show();
                    $("#logout").hide();
                }
                $("#btnSave").text('Update');

                if($("#user_session").text() != 'User' &&  $("#option").text() == 'student'){

                    var ajaxConfig = {
                        method: "GET",
                        url:SERVER_URL + "/api/v1/students/"+$("#user_session").text(),
                        async: true
                    };

                    $.ajax(ajaxConfig).done(function(result,statusText,jxhr){
                        console.log(result);
                        $("#sid").val(result.sid),
                            $("#fname").val(result.fname),
                            $("#lname").val(result.lname),
                            $("#bday").val(result.bday),
                            $("#address").text(result.address),
                            $("#phone").val(result.phone),
                            $("#email").val(result.email),
                            $("#password").val(result.password)


                    }).fail(function(jxhr,statusText,error){
                        console.log(error);
                    });


                }if(studentID != null && possition == 'lecturer'){
                    var ajaxConfig = {
                        method: "GET",
                        url:SERVER_URL + "/api/v1/lectures/"+studentID,
                        async: true
                    };

                    $.ajax(ajaxConfig).done(function(result,statusText,jxhr){
                        console.log(result);
                        $("#sid").val(result.aid),
                            $("#fname").val(result.fname),
                            $("#lname").val(result.lname),
                            $("#bday").val(result.bday),
                            $("#address").text(result.address),
                            $("#phone").val(result.phone),
                            $("#email").val(result.email),
                            $("#password").val(result.password)

                    }).fail(function(jxhr,statusText,error){
                        console.log(error);
                    });
                }


            }).fail(function(jxhr,statusText,error){
                console.log(error);
            });



        });

        $("#logout").click(function(){
            var ajaxConfig = {
                method: "POST",
                url:SERVER_URL + "/api/v1/login/login",
                async: true
            };

            $.ajax(ajaxConfig).done(function(result,statusText,jxhr){

                studentID = 'User';
                $("#user_session").text(studentID);
                $("#login").show();
                $("#logout").hide();
                console.log(studentID);
                alert("Log Out");
            }).fail(function(jxhr,statusText,error){
                console.log(error);
            });
        });//courseRegistration



    </script>
</body>

<!-- Mirrored from colorlib.com/preview/theme/eclipse/course-details.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 17 Feb 2019 15:42:42 GMT -->

</html>
